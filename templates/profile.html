<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ user.username }}'s Profile</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="bg">

<div class="profile-layout">
    <div class="card profile-card">
        <div class="profile-header">
            <h1>{{ user.username }}</h1>
            <a href="{{ url_for('home') }}" class="button secondary small">Home</a>
        </div>

        <div class="stats-grid">
            <div class="stat-item">
                <h2>{{ user.won_matches|length }}</h2>
                <p>Wins</p>
            </div>
            <div class="stat-item">
                <h2>{{ user.lost_matches|length }}</h2>
                <p>Losses</p>
            </div>
            <div class="stat-item">
                <h2>{{ (user.won_matches|length) + (user.lost_matches|length) }}</h2>
                <p>Total Games</p>
            </div>
        </div>

        <div class="divider"></div>

        <h2>Match History</h2>
        <ul class="match-history">
            {% for match in matches %}
                <li class="match-item {% if match.is_draw %}draw{% elif match.winner == user %}win{% else %}loss{% endif %}">
                    <div class="match-result">
                        {% if match.is_draw %}
                            Draw
                        {% elif match.winner == user %}
                            Win
                        {% else %}
                            Loss
                        {% endif %}
                    </div>
                    <div class="match-opponent">
                        vs.
                        {% if match.winner == user %}
                            {{ match.loser.username }}
                        {% else %}
                            {{ match.winner.username }}
                        {% endif %}
                    </div>
                    <div class="match-timestamp">
                        {{ match.timestamp.strftime('%b %d, %Y') }}
                    </div>
                </li>
            {% else %}
                <li>No matches played yet.</li>
            {% endfor %}
        </ul>
    </div>
</div>

</body>
</html>